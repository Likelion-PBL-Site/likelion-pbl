지금 다루었던 트러블이나 변경사항에 대해 새로운 트러블슈팅 문서를 작성해줘.
이 문서는 기술적 해결 과정뿐만 아니라 AI 에이전트(Claude Code)와의 협업 흐름도 함께 기록합니다.

1. `docs/troubleshooting/` 폴더의 기존 파일 번호를 확인하고 다음 번호로 파일 생성
2. 파일명 형식: `{번호}-{간단한-설명}.md` (예: `002-notion-cache-optimization.md`)

3. 문서 구조:
```markdown
# [문제/개선 제목]

> 작성일: YYYY-MM-DD
> 관련 파일: `파일 경로들`
> 태그: #troubleshooting #optimization #feature 등

## 배경 및 문제 상황

[왜 이 작업이 필요했는지, 어떤 문제/불편함이 있었는지]

### 증상
- 구체적인 증상이나 개선 필요 사항

---

## AI 협업 흐름 (Prompting Log)

> 이 섹션은 Claude Code와의 대화 흐름을 기록하여, 효과적인 AI 협업 패턴을 문서화합니다.

### 1단계: 문제 정의
**User Prompt:**
> "실제로 입력한 프롬프트 또는 요약"

**AI Response:**
- AI가 어떻게 문제를 이해하고 접근했는지
- 제안한 분석 방향이나 질문

### 2단계: 해결 방안 탐색
**User Prompt:**
> "후속 프롬프트"

**AI Response:**
- 제시한 옵션들
- 각 옵션의 장단점 분석

### 3단계: 구현 결정
**User Prompt:**
> "선택한 방향 또는 추가 질문"

**AI Response:**
- 구현 계획
- 생성한 파일/코드 목록

### 4단계: 검증 및 완료
**User Prompt:**
> "테스트 요청 또는 확인"

**AI Response:**
- 테스트 결과
- 최종 확인 사항

---

## 기술적 분석

### 원인/배경 분석
[기술적인 원인 분석]

### 해결 접근 방식
[선택한 해결 방식과 그 이유]

---

## 구현 내용

### 생성/수정된 파일
| 파일 | 변경 내용 |
|------|----------|
| `path/to/file` | 설명 |

### 핵심 코드
```언어
// 주요 코드 스니펫
```

---

## 검증

### 테스트 방법
[어떻게 테스트했는지]

### 결과
[테스트 결과 - 스크린샷 경로 등]

---

## 프롬프팅 인사이트

### 효과적이었던 프롬프트 패턴
- [어떤 방식의 질문이 좋은 결과를 이끌어냈는지]

### 개선할 수 있는 점
- [다음에 비슷한 상황에서 더 나은 프롬프트 방법]

### AI 협업 팁
- [이 케이스에서 배운 AI 활용 팁]

---

## 교훈

### 기술적 교훈
1. [배운 점]

### AI 협업 교훈
1. [효과적인 협업 방식]
```

4. 현재 대화 히스토리를 분석하여:
   - 사용자의 주요 프롬프트들을 추출/요약
   - AI의 분석 및 제안 과정을 정리
   - 의사결정 포인트들을 기록

5. 작성 완료 후:
   - 파일 경로 출력
   - 핵심 요약 (3줄 이내)
   - 프롬프팅 하이라이트 (가장 효과적이었던 대화 패턴)
